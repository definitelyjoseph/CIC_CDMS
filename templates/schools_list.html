{% extends "base.html" %}

{% block title %}Schools â€“ Captain I Can!{% endblock %}
{% block page_title %}Schools{% endblock %}

{% block content %}

<!-- Page heading -->
<h2>All Schools</h2>

<!-- Search form -->
<form method="get" action="{{ url_for('list_schools') }}">
    <label for="search">Search by name:</label>
    <input type="text" id="search" name="search" value="{{ search or '' }}" placeholder="Enter school name">
    <button type="submit">Search</button>
</form>

<br>

<!-- If there are schools in the database, show them -->
{% if schools %}
<table border="1" cellpadding="5">
    <thead>
        <tr>
            <!-- Table headings -->
            <th>Name</th>
            <th>Address</th>
            <th>Contact Person</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>

        <!-- Loop through all schools -->
        {% for school in schools %}
        <tr>
            <td>{{ school["name"] }}</td>
            <td>{{ school["address"] }}</td>
            <td>{{ school["contact_person"] }}</td>

            <!-- Actions: Edit + Delete -->
            <td>
                <!-- Existing Edit link -->
                <a href="{{ url_for('edit_school', school_id=school['id']) }}">Edit</a>

                <!-- ADDED: Simple inline delete form -->
                <form method="post"
                      action="{{ url_for('delete_school', school_id=school['id']) }}"
                      style="display:inline;"
                      onsubmit="return confirm('Delete this school?');">
                    <button type="submit">Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- If no schools exist -->
{% else %}
<p>No schools found.</p>
{% endif %}

{% endblock %}
